/*
 * jQuery Fraction Slider v0.8.2
 * http://fractionslider.jacksbox.de
 *
 * Author: Mario JÃ¤ckle
 * eMail: support@jacksbox.de
 *
 * Copyright 2013, jacksbox.design
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 */
(function(e){var t=function(t,n){function d(){if(n["controls"]){a.append('<a href="#" class="prev"></a><a href="#" class="next" ></a>');a.find(".next").bind("click",function(){return E()});a.find(".prev").bind("click",function(){return w()})}if(n["pager"]){f=e('<div class="fs-pager-wrapper"></div>');a.append(f)}if(n["fullWidth"]){a.css({overflow:"visible"})}else{a.css({overflow:"hidden"})}a.children(".slide").each(function(t){var r=e(this);r.children().attr("rel",t).addClass("fs_obj");if(n["pager"]){f.append('<a rel="'+t+'" href="#"></a>')}});if(n["pager"]){f=e(f).children("a");f.bind("click",function(){return b(this)})}if(n["responsive"]){v()}if(a.find(".fs_loader").length>0){a.find(".fs_loader").remove()}x()}function v(){var t=n["dimensions"].split(",");o=t["0"],dY=t["1"];var r=a.children(".slide").find("*");r.each(function(){var t=e(this),n=null,r=null,i=null;if(t.attr("data-position")!=null){var s=t.attr("data-position").split(",");n=y(s[1],o);r=y(s[0],dY);t.attr("data-position",r+","+n)}if(t.attr("width")!=null){i=t.attr("width");n=y(i,o);t.attr("width",n+"%");t.css("width",n+"%")}else if(t.css("width")!="0px"){i=t.css("width");if(i.indexOf("px")>0){i=i.substring(0,i.length-2);n=y(i,o);t.css("width",n+"%")}}else if(t.prop("tagName").toLowerCase()=="img"){i=t.get(0).width;n=y(i,o);t.css("width",n+"%")}if(t.attr("height")!=null){i=t.attr("height");r=y(i,dY);t.attr("height",r+"%");t.css("height",r+"%")}else if(t.css("height")!="0px"){i=t.css("height");if(i.indexOf("px")>0){i=i.substring(0,i.length-2);r=y(i,dY);t.css("height",r+"%")}}else if(t.prop("tagName").toLowerCase()=="img"){i=t.get(0).height;r=y(i,dY);t.css("height",r+"%")}t.attr("data-fontsize",t.css("font-size"))});a.css({width:"auto",height:"auto"}).append('<div class="fs-stretcher" style="width:'+o+"px; height:"+dY+'px"></div>');m();e(window).bind("resize",function(){m()})}function m(){var e=a.innerWidth(),t=a.innerHeight();if(e<o){var i=o/dY,s=e/i;a.find(".fs-stretcher").css({width:e+"px",height:s+"px"})}var u=a.width();h=y((c-u)/2,o);l=100;if(n["fullWidth"]){l=100+h*2}p=100;if(r.init==false||e<o){g()}}function g(){var t=null,n=null;var r=a.children(".slide").find("*");r.each(function(){obj=e(this);var t=obj.attr("data-fontsize");if(t.indexOf("px")>0){t=t.substring(0,t.length-2);n=y(t,dY)*(a.find(".fs-stretcher").height()/100);obj.css("fontSize",n+"px");obj.css("lineHeight","100%")}})}function y(e,t){return e/(t/100)}function b(t){if(r.controlsActive){r.controlsActive=false;S();a.find(".slide *").stop(true,true);N(r.currentSlide);r.currentSlide=e(t).attr("rel");r.currentStep=0;r.maxStep=0;r.currentObj=0;r.maxObjs=0;r.finishedObjs=0;T()}return false}function w(){if(r.controlsActive){r.controlsActive=false;S();a.find(".slide *").stop(true,true);N(r.currentSlide);r.currentSlide--;r.currentStep=0;r.maxStep=0;r.currentObj=0;r.maxObjs=0;r.finishedObjs=0;if(r.currentSlide<0){r.currentSlide=r.maxSlide}T()}return false}function E(){if(r.controlsActive){r.controlsActive=false;S();a.find(".slide *").stop(true,true);N(r.currentSlide);r.currentSlide++;r.currentStep=0;r.maxStep=0;r.currentObj=0;r.maxObjs=0;r.finishedObjs=0;if(r.currentSlide>r.maxSlide){r.currentSlide=0}T()}return false}function S(){var t=i.length;e.each(i,function(e){clearTimeout(this);if(e==t-1){i=[]}})}function x(){if(r.init){var e=0;r.init=false}else{var e=n["timeout"];r.init=false}i.push(setTimeout(function(){if(r.maxSlide==0&&r.running==true){}else{N(r.currentSlide-1);T();r.running=true}},e))}function T(){if(n["backgroundAnimation"]){_()}var e=a.children(".slide:eq("+r.currentSlide+")");if(e.length==0){r.currentSlide=0;e=a.children(".slide:eq("+r.currentSlide+")")}if(n["pager"]){f.removeClass("active");f.eq(r.currentSlide).addClass("active")}C();e.css({display:"block"});e.children().hide();r.currentObj=0;r.maxObjs=0;r.finishedObjs=0;k()}function N(t){if(t<0){return}var i=a.children(".slide:eq("+t+")");var s=i.children();s.each(function(){var t=e(this);var r=t.position();var i=t.attr("data-out");var s=t.attr("data-ease-out");if(i==null){i=n["transitionOut"]}if(s==null){s=n["easeOut"]}M(t,r,i,null,s)}).promise().done(function(){i.hide();r.controlsActive=true})}function C(){var t=a.children(".slide:eq("+r.currentSlide+")").children();var n=0;t.each(function(){var t=parseFloat(e(this).attr("data-step"));n=t>n?t:n});r.maxStep=n}function k(){if(r.currentStep==0){var e=a.children(".slide:eq("+r.currentSlide+")").children('*:not([data-step]), *[data-step="'+r.currentStep+'"]')}else{var e=a.children(".slide:eq("+r.currentSlide+")").children('*[data-step="'+r.currentStep+'"]')}r.maxObjs=e.length;s=e;if(r.maxObjs>0){r.currentObj=0;r.finishedObjs=0;L()}else{a.trigger("fraction:stepFinished")}}function L(){var t=e(s[r.currentObj]);var i=t.attr("data-position");var o=t.attr("data-in");var u=t.attr("data-delay");var a=t.attr("data-time");var f=t.attr("data-ease-in");var l=t.attr("data-special");if(i==null){i=n["position"].split(",")}else{i=i.split(",")}if(o==null){o=n["transitionIn"]}if(u==null){u=n["delay"]}if(f==null){f=n["easeIn"]}O(t,i,o,u,a,f,l);r.currentObj++;if(r.currentObj<r.maxObjs){L()}else{r.currentObj=0}}function A(e){if(e.attr("rel")==r.currentSlide){r.finishedObjs++;if(r.finishedObjs==r.maxObjs){a.trigger("fraction:stepFinished")}}}function O(t,s,o,u,a,f,c){var d=null;var v=null;var m=null;var g=null;var y=null;switch(o){case"left":d=s[0];v=l;break;case"bottomLeft":d=p;v=l;break;case"topLeft":d=t.outerHeight()*-1;v=l;break;case"top":d=t.outerHeight()*-1;v=s[1];break;case"bottom":d=p;v=s[1];break;case"right":d=s[0];v=0-h-t.outerWidth();break;case"bottomRight":d=p;v=0-h-t.outerWidth();break;case"topRight":d=t.outerHeight()*-1;v=0-h-t.outerWidth();break}m=s[0];g=s[1];if(a==null){y=n["speedIn"]}else{y=a-u}if(n["responsive"]){g=g+"%";m=m+"%";v=v+"%";d=d+"%"}else{g=g+"px";m=m+"px";v=v+"px";d=d+"px"}i.push(setTimeout(function(){if(c=="cycle"&&t.attr("rel")==r.currentSlide){var i=t.prev();if(i.length>0){var s=e(i).attr("data-position").split(",");s={top:s[0],left:s[1]};var u=e(i).attr("data-out");if(u==null){u=n["transitionOut"]}M(i,s,u,y)}}if(o=="fade"){t.css({top:m,left:g}).fadeIn(y,function(){A(t)}).addClass("fs_obj_active")}else if(o=="none"){t.css({top:m,left:g}).show(0,function(){A(t)}).addClass("fs_obj_active")}else{t.css({top:d,left:v}).show().animate({top:m,left:g},y,f,function(){A(t)}).addClass("fs_obj_active")}},u))}function M(e,t,r,i,s){var u=null;var a=null;switch(r){case"left":u=e.css("top");if(u.indexOf("px")>0&&n["responsive"]){u=u.substring(0,u.length-2);u=y(u,dY)}a=0-h-100-e.outerWidth();break;case"bottomLeft":u=p;a=0-h-100-e.outerWidth();break;case"topLeft":u=e.outerHeight()*-1;a=0-h-100-e.outerWidth();break;case"top":u=e.outerHeight()*-1;a=e.css("left");if(a.indexOf("px")>0&&n["responsive"]){a=a.substring(0,a.length-2);a=y(a,o)}break;case"bottom":u=p;a=e.css("left");a=e.css("left");if(a.indexOf("px")>0&&n["responsive"]){a=a.substring(0,a.length-2);a=y(a,o)}break;case"right":u=e.css("top");if(u.indexOf("px")>0&&n["responsive"]){u=u.substring(0,u.length-2);u=y(u,dY)}a=l;break;case"bottomRight":u=p;a=l;break;case"topRight":u=e.outerHeight()*-1;a=l;break;default:break}if(u!=null){if(u.toString().indexOf("px")>0){u=u.substring(0,u.length-2)}}if(a!=null){if(a.toString().indexOf("px")>0){a=a.substring(0,a.length-2)}}if(i==null&&r!="fade"||i==null&&r!="none"){var f=null,c=null,d=null;var v=null,m=null,g=null;if(n["responsive"]){d=y(1e3,o);f=y(t["left"],o);c=y(t["top"],dY)}else{d=1e3;f=t["left"];c=t["top"]}if(f>a){g=Math.abs(f-a)}else if(a>f){g=Math.abs(a-f)}else{g=0}if(c>u){m=Math.abs(c-u)}else if(u>c){m=Math.abs(u-c)}else{m=0}v=Math.sqrt(g*g+m*m);i=v*(n["speedOut"]/d)}else if(i!=null){i=n["speedOut"]}else{i=n["speedOut"]}if(a!=null){if(n["responsive"]){a=a+"%"}else{a=a+"px"}}if(u!=null){if(n["responsive"]){u=u+"%"}else{u=u+"px"}}if(r=="fade"){e.fadeOut(i,function(){e.hide()}).removeClass("fs_obj_active")}else if(r=="none"){e.hide(0,function(){e.hide()}).removeClass("fs_obj_active")}else{e.animate({top:u,left:a},i,s,function(){e.hide()}).removeClass("fs_obj_active")}}function _(){if(n["backgroundElement"]==null||n["backgroundElement"]==""){var t=a.parent()}else{var t=e(n["backgroundElement"])}var r=t.css("background-position");r=r.split(" ");var i=n["backgroundX"];var s=n["backgroundY"];var o=Number(r[0].replace(/[px,%]/g,""))+i;var u=Number(r[1].replace(/[px,%]/g,""))+s;t.animate({backgroundPositionX:o+"px",backgroundPositionY:u+"px"},n["backgroundSpeed"],n["backgroundEase"])}var r={init:true,running:false,controlsActive:true,currentSlide:0,maxSlide:0,currentStep:0,maxStep:0,currentObj:0,maxObjs:0,finishedObjs:0};var i=[];var s=null;var o=null,u=null;e(t).wrapInner('<div class="fraction-slider" />');var a=e(t).find(".fraction-slider"),f=null;r.maxSlide=a.children(".slide").length-1;var l=a.width();var c=e("body").width();var h=(c-l)/2;if(n["fullWidth"]){l=c}var p=a.height();d();a.bind("fraction:stepFinished",function(){r.currentStep++;if(r.currentStep>r.maxStep){if(n["autoChange"]){r.currentSlide++;r.currentStep=0;x()}return}k()})};e.fn.fractionSlider=function(n){var n=e.extend({position:"0,0",transitionIn:"left",transitionOut:"left",fullWidth:false,delay:0,timeout:2e3,speedIn:2500,speedOut:1e3,easeIn:"easeOutExpo",easeOut:"easeOutCubic",controls:false,pager:false,autoChange:true,backgroundAnimation:false,backgroundElement:null,backgroundX:500,backgroundY:500,backgroundSpeed:2500,backgroundEase:"easeOutCubic",responsive:false,dimensions:""},n);var r=new t(this,n)};var n={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){n[t]=function(t){return Math.pow(t,e+2)}});e.extend(n,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11){}return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}});e.each(n,function(t,n){e.easing["easeIn"+t]=n;e.easing["easeOut"+t]=function(e){return 1-n(1-e)};e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})})(jQuery)