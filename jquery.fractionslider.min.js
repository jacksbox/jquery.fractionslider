/*
 * jQuery Fraction Slider v0.9.6
 * http://fractionslider.jacksbox.de
 *
 * Author: Mario JÃ¤ckle
 * eMail: support@jacksbox.de
 *
 * Copyright 2013, jacksbox.design
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 */
(function(e){var t=function(t,n){function v(){if(n["controls"]){f.append('<a href="#" class="prev"></a><a href="#" class="next" ></a>');f.find(".next").bind("click",function(){return C()});f.find(".prev").bind("click",function(){return N()})}if(n["fullWidth"]){f.css({overflow:"visible"})}else{f.css({overflow:"hidden"})}if(n["pager"]){l=e('<div class="fs-pager-wrapper"></div>');f.append(l)}f.children(".slide").each(function(t){var r=e(this);r.children().attr("rel",t).addClass("fs_obj");r.children("[data-fixed]").addClass("fs_fixed_obj");if(n["pager"]){var i=e('<a rel="'+t+'" href="#"></a>').bind("click",function(){return T(this)});l.append(i)}});if(n["pager"]){l=e(l).children("a")}if(n["responsive"]){X()}if(f.find(".fs_loader").length>0){f.find(".fs_loader").remove()}m()}function m(){r.stop=false;r.pause=false;r.running=true;k("slide")}function g(){r.stop=false;r.pause=false;r.running=true;E()}function y(){r.stop=true;r.running=false;f.find(".slide").stop(true,true);f.find(".fs_obj").stop(true,true).removeClass("fs-animation");G(s)}function b(){r.pause=true;r.running=false;f.find(".fs-animation").finish()}function w(){r.stop=false;r.pause=false;r.running=true;if(r.finishedObjs<r.maxObjs){k("obj")}else if(r.finishedObjs<r.maxStep){k("step")}else{k("slide")}}function E(){r.lastSlide=r.currentSlide;r.currentSlide++;r.stop=false;r.pause=false;r.running=true;A()}function S(){r.lastSlide=r.currentSlide;r.currentSlide--;r.stop=false;r.pause=false;r.running=true;A()}function x(e){r.lastSlide=r.currentSlide;r.currentSlide=e;r.stop=false;r.pause=false;r.running=true;A()}function T(t){y();x(e(t).attr("rel"));return false}function N(){y();S();return false}function C(){y();E();return false}function k(e){if(!r.pause&&!r.stop&&r.running){switch(e){case"slide":L();break;case"step":H();break;case"obj":j();break}}}function L(){var e=n["timeout"];if(r.init){r.init=false;A(true)}else{s.push(setTimeout(function(){if(r.maxSlide==0&&r.running==true){}else{r.lastSlide=r.currentSlide;r.currentSlide++;A()}},e))}}function A(t){e(".active-slide").removeClass("active-slide");if(r.currentSlide>r.maxSlide){r.currentSlide=0}if(r.currentSlide<0){r.currentSlide=r.maxSlide}i.currentSlide=f.children(".slide:eq("+r.currentSlide+")").addClass("active-slide");if(i.currentSlide.length==0){r.currentSlide=0;i.currentSlide=f.children(".slide:eq("+r.currentSlide+")")}if(r.lastSlide!=null){if(r.lastSlide<0){r.lastSlide=r.maxSlide}i.lastSlide=f.children(".slide:eq("+r.lastSlide+")")}if(t){i.animation="none"}else{i.animation=i.currentSlide.attr("data-in");if(i.animation==null){i.animation=n["slideTransition"]}}if(n["slideEndAnimation"]&&r.lastSlide!=null){I()}else{switch(i.animation){case"none":O();_();break;case"scrollLeft":O();_();break;case"scrollRight":O();_();break;case"scrollTop":O();_();break;case"scrollBottom":O();_();break;default:O();break}}}function O(){if(n["backgroundAnimation"]){W()}if(n["pager"]){l.removeClass("active");l.eq(r.currentSlide).addClass("active")}P();i.currentSlide.children().hide();r.currentStep=0;r.currentObj=0;r.maxObjs=0;r.finishedObjs=0;i.currentSlide.children("[data-fixed]").show();q()}function M(e){if(i.lastSlide!=null){i.lastSlide.hide()}if(e.hasClass("active-slide")){k("step")}}function _(){if(i.lastSlide==null){return}if(i.animation!="none"){R()}}function D(){}function P(){var t=i.currentSlide.children();var n=0;t.each(function(){var t=parseFloat(e(this).attr("data-step"));n=t>n?t:n});r.maxStep=n}function H(){if(r.currentStep==0){var e=i.currentSlide.children('*:not([data-step]):not([data-fixed]), *[data-step="'+r.currentStep+'"]:not([data-fixed])')}else{var e=i.currentSlide.children('*[data-step="'+r.currentStep+'"]:not([data-fixed])')}r.maxObjs=e.length;o=e;if(r.maxObjs>0){r.currentObj=0;r.finishedObjs=0;k("obj")}else{B()}}function B(){r.currentStep++;if(r.currentStep>r.maxStep){if(n["autoChange"]){r.currentStep=0;k("slide")}return}k("step")}function j(){var t=e(o[r.currentObj]);t.addClass("fs-animation");var i=t.attr("data-position");var s=t.attr("data-in");var u=t.attr("data-delay");var a=t.attr("data-time");var f=t.attr("data-ease-in");var l=t.attr("data-special");if(i==null){i=n["position"].split(",")}else{i=i.split(",")}if(s==null){s=n["transitionIn"]}if(u==null){u=n["delay"]}if(f==null){f=n["easeIn"]}U(t,i,s,u,a,f,l);r.currentObj++;if(r.currentObj<r.maxObjs){k("obj")}else{r.currentObj=0}}function F(e){e.removeClass("fs-animation");if(e.attr("rel")==r.currentSlide){r.finishedObjs++;if(r.finishedObjs==r.maxObjs){B()}}}function I(){var t=i.lastSlide.children(":not([data-fixed])");t.each(function(){var t=e(this);var r=t.position();var i=t.attr("data-out");var s=t.attr("data-ease-out");if(i==null){i=n["transitionOut"]}if(s==null){s=n["easeOut"]}z(t,r,i,null,s)}).promise().done(function(){_();O()})}function q(){var e=i.currentSlide;var t={},r={};var s=n["slideTransitionSpeed"];var o=i.animation;if(n["responsive"]){unit="%"}else{unit="px"}switch(o){case"slideLeft":t.left=c+unit;t.top=0+unit;t.display="block";r.left=0+unit;r.top=0+unit;break;case"slideTop":t.left=0+unit;t.top=0-d+unit;t.display="block";r.left=0+unit;r.top=0+unit;break;case"slideBottom":t.left=0+unit;t.top=d+unit;t.display="block";r.left=0+unit;r.top=0+unit;break;case"slideRight":t.left=0-c+unit;t.top=0+unit;t.display="block";r.left=0+unit;r.top=0+unit;break;case"fade":t.left=0+unit;t.top=0+unit;t.display="block";t.opacity=0;r.opacity=1;break;case"none":t.left=0+unit;t.top=0+unit;t.display="block";s=0;break;case"scrollLeft":t.left=c+unit;t.top=0+unit;t.display="block";r.left=0+unit;r.top=0+unit;break;case"scrollTop":t.left=0+unit;t.top=0-d+unit;t.display="block";r.left=0+unit;r.top=0+unit;break;case"scrollBottom":t.left=0+unit;t.top=d+unit;t.display="block";r.left=0+unit;r.top=0+unit;break;case"scrollRight":t.left=0-c+unit;t.top=0+unit;t.display="block";r.left=0+unit;r.top=0+unit;break}e.css(t).animate(r,s,"linear",function(){M(e)})}function R(){var e={},t={};var r=n["slideTransitionSpeed"];var s=null;var o=i.animation;if(n["responsive"]){s="%"}else{s="px"}switch(o){case"scrollLeft":t.left=0-c+s;t.top=0+s;break;case"scrollTop":t.left=0+s;t.top=d+s;break;case"scrollBottom":t.left=0+s;t.top=0-d+s;break;case"scrollRight":t.left=c+s;t.top=0+s;break;default:r=0;break}i.lastSlide.animate(t,r,"linear",function(){D()})}function U(t,i,o,u,a,f,l){var h={},v={};var m=n["speedIn"],g=null;if(n["responsive"]){g="%"}else{g="px"}if(a!=null){m=a-u}switch(o){case"left":h.top=i[0];h.left=c;break;case"bottomLeft":h.top=d;h.left=c;break;case"topLeft":h.top=t.outerHeight()*-1;h.left=c;break;case"top":h.top=t.outerHeight()*-1;h.left=i[1];break;case"bottom":h.top=d;h.left=i[1];break;case"right":h.top=i[0];h.left=0-p-t.outerWidth();break;case"bottomRight":h.top=d;h.left=0-p-t.outerWidth();break;case"topRight":h.top=t.outerHeight()*-1;h.left=0-p-t.outerWidth();break;case"fade":h.top=i[0];h.left=i[1];h.opacity=0;v.opacity=1;break;case"none":h.top=i[0];h.left=i[1];h.display="none";m=0;break}v.top=i[0];v.left=i[1];v.left=v.left+g;v.top=v.top+g;h.left=h.left+g;h.top=h.top+g;s.push(setTimeout(function(){if(l=="cycle"&&t.attr("rel")==r.currentSlide){var i=t.prev();if(i.length>0){var s=e(i).attr("data-position").split(",");s={top:s[0],left:s[1]};var o=e(i).attr("data-out");if(o==null){o=n["transitionOut"]}z(i,s,o,m)}}t.css(h).show().animate(v,m,f,function(){F(t)}).addClass("fs_obj_active")},u))}function z(e,t,r,i,s){var o={},a={};var i=n["speedOut"],f=null;if(n["responsive"]){f="%"}else{f="px"}var l=e.outerWidth(),h=e.outerHeight();if(n["responsive"]){l=K(l,u);h=K(h,dY)}switch(r){case"left":a.left=0-p-100-l;break;case"bottomLeft":a.top=d;a.left=0-p-100-l;break;case"topLeft":a.top=-h;a.left=0-p-100-l;break;case"top":a.top=-h;break;case"bottom":a.top=d;break;case"right":a.left=c;break;case"bottomRight":a.top=d;a.left=c;break;case"topRight":a.top=-h;a.left=c;break;case"fade":o.opacity=1;a.opacity=0;break;case"hide":a.display="none";i=0;break;default:a.display="none";i=0;break}if(typeof a.top!=="undefined"){if(a.top.toString().indexOf("px")>0){a.top=a.top.substring(0,a.top.length-2);if(n["responsive"]){a.top=K(a.top,dY)}}}if(typeof a.left!=="undefined"){if(a.left.toString().indexOf("px")>0){a.left=a.left.substring(0,a.left.length-2);if(n["responsive"]){a.left=K(a.left,u)}}}a.left=a.left+f;a.top=a.top+f;e.css(o).animate(a,i,s,function(){e.hide()}).removeClass("fs_obj_active")}function W(){if(n["backgroundElement"]==null||n["backgroundElement"]==""){var t=f.parent()}else{var t=e(n["backgroundElement"])}var r=t.css("background-position");r=r.split(" ");var i=n["backgroundX"];var s=n["backgroundY"];var o=Number(r[0].replace(/[px,%]/g,""))+Number(i);var u=Number(r[1].replace(/[px,%]/g,""))+Number(s);t.animate({backgroundPositionX:o+"px",backgroundPositionY:u+"px"},n["backgroundSpeed"],n["backgroundEase"])}function X(){var t=n["dimensions"].split(",");u=t["0"],dY=t["1"];var r=f.children(".slide").find("*");r.each(function(){var t=e(this),n=null,r=null,i=null;if(t.attr("data-position")!=null){var s=t.attr("data-position").split(",");n=K(s[1],u);r=K(s[0],dY);t.attr("data-position",r+","+n)}if(t.attr("width")!=null){i=t.attr("width");n=K(i,u);t.attr("width",n+"%");t.css("width",n+"%")}else if(t.css("width")!="0px"){i=t.css("width");if(i.indexOf("px")>0){i=i.substring(0,i.length-2);n=K(i,u);t.css("width",n+"%")}}else if(t.prop("tagName").toLowerCase()=="img"){i=t.get(0).width;n=K(i,u);t.css("width",n+"%")}if(t.attr("height")!=null){i=t.attr("height");r=K(i,dY);t.attr("height",r+"%");t.css("height",r+"%")}else if(t.css("height")!="0px"){i=t.css("height");if(i.indexOf("px")>0){i=i.substring(0,i.length-2);r=K(i,dY);t.css("height",r+"%")}}else if(t.prop("tagName").toLowerCase()=="img"){i=t.get(0).height;r=K(i,dY);t.css("height",r+"%")}t.attr("data-fontsize",t.css("font-size"))});f.css({width:"auto",height:"auto"}).append('<div class="fs-stretcher" style="width:'+u+"px; height:"+dY+'px"></div>');V();e(window).bind("resize",function(){V()})}function V(){var e=f.innerWidth(),t=f.innerHeight();if(e<u){var i=u/dY,s=e/i;f.find(".fs-stretcher").css({width:e+"px",height:s+"px"})}var o=f.width();p=K((h-o)/2,u);c=100;if(n["fullWidth"]){c=100+p*2}d=100;if(r.init==false||e<u){J()}}function J(){var t=null,n=null;var r=f.children(".slide").find("*");r.each(function(){obj=e(this);var t=obj.attr("data-fontsize");if(t.indexOf("px")>0){t=t.substring(0,t.length-2);n=K(t,dY)*(f.find(".fs-stretcher").height()/100);obj.css("fontSize",n+"px");obj.css("lineHeight","100%")}})}function K(e,t){return e/(t/100)}function Q(e){clearTimeout(e)}function G(t){var n=t.length;e.each(t,function(e){clearTimeout(this);if(e==n-1){t=[]}})}var r={init:true,running:false,pause:false,stop:false,controlsActive:true,currentSlide:0,lastSlide:null,maxSlide:0,currentStep:0,maxStep:0,currentObj:0,maxObjs:0,finishedObjs:0};var i={currentSlide:null,lastSlide:null,animationkey:"none"};var s=[];var o=null;var u=null,a=null;e(t).wrapInner('<div class="fraction-slider" />');var f=e(t).find(".fraction-slider"),l=null;r.maxSlide=f.children(".slide").length-1;var c=f.width();var h=e("body").width();var p=0;if(n["fullWidth"]){p=(h-c)/2;c=h}var d=f.height();v()};e.fn.fractionSlider=function(n){var n=e.extend({slideTransition:"none",slideTransitionSpeed:2e3,slideEndAnimation:true,position:"0,0",transitionIn:"left",transitionOut:"left",fullWidth:false,delay:0,timeout:2e3,speedIn:2500,speedOut:1e3,easeIn:"easeOutExpo",easeOut:"easeOutCubic",controls:false,pager:false,autoChange:true,backgroundAnimation:false,backgroundElement:null,backgroundX:500,backgroundY:500,backgroundSpeed:2500,backgroundEase:"easeOutCubic",responsive:false,dimensions:""},n);return this.each(function(){var e=new t(this,n)})};var n={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){n[t]=function(t){return Math.pow(t,e+2)}});e.extend(n,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11){}return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}});e.each(n,function(t,n){e.easing["easeIn"+t]=n;e.easing["easeOut"+t]=function(e){return 1-n(1-e)};e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})})(jQuery)